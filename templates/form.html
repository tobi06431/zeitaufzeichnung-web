<!DOCTYPE html><html lang="de"><head>  <meta charset="UTF-8">  <title>Zeitaufzeichnung</title>  <meta name="viewport" content="width=device-width, initial-scale=1">  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"></head><body><h2>Zeitaufzeichnung</h2><form method="post">  <!-- ================= KIRCHENGEMEINDE ================= -->  <label>Kath. Kirchengemeinde</label>  <input    type="text"    name="Kath. Kirchengemeinde"    id="kirchengemeinde_input"    placeholder="z.B. Heilige Katharina Kaspar Limburger Land">  <select    id="kirchengemeinde_select"    onchange="setKirchengemeindeFromSelect()">    <option value="">Vorschlag auswählen …</option>    <option value="Heilige Katharina Kaspar Limburger Land">      Heilige Katharina Kaspar Limburger Land    </option>    <option value="St. Peter und Paul Bad Camberg">      St. Peter und Paul Bad Camberg    </option>    <option value="Heilig Geist Goldener Grund">      Heilig Geist Goldener Grund    </option>  </select>  <!-- ================= STAMMDATEN ================= -->  <label>Einsatzort    <input name="Einsatzort" id="einsatzort_input" list="orte_datalist">  </label>  <!-- Datalist für Einsatzort UND Kirchort (wird je nach Pfarrei befüllt) -->  <datalist id="orte_datalist"></datalist>  <label>GKZ    <input name="GKZ">  </label>  <label>Monat/Jahr    <input name="Monat/Jahr">  </label>  <label>Nachname    <input name="Nachname">  </label>  <label>Vorname    <input name="Vorname">  </label>  <label>Geburtsdatum    <input name="Geburtsdatum">  </label>  <label>Pers.-Nr.    <input name="Pers.-Nr.">  </label>  <label>Tätigkeit    <input name="Tätigkeit">  </label>  <label>Beschäftigungsumfang    <input name="Beschäftigungsumfang">  </label>  <label>Mehrarbeit (Textfeld)    <input name="Mehrarbeit (Textfeld)">  </label>  <label>Mehrarbeit Stunden    <input name="Mehrarbeit Stunden">  </label>  <label>Datum</label>  <div class="row">    <input id="datum" name="Datum">    <button type="button"      onclick="document.getElementById('datum').value='{{ today }}'">      Heute    </button>  </div>  <label>Mehrarbeitsstunden auszahlen</label>  <select name="Mehrarbeit_auszahlen">    <option value="Nein" selected>Nein</option>    <option value="Ja">Ja</option>  </select>  <!-- ================= GOTTESDIENSTE ================= -->  <h3>Gottesdienste</h3>  <div class="gd-box">    <label>Kirchort      <input type="text" id="gd_kirchort" list="orte_datalist">    </label>    <label>Datum      <input type="date" id="gd_datum">    </label>    <label>Besoldungssatz      <input        type="number"        id="gd_satz"        step="0.1"        inputmode="decimal"        list="satz_datalist"        placeholder="z.B. 1.8">    </label>    <!-- Datalist für Besoldungssätze -->    <datalist id="satz_datalist">      <option value="1.0"></option>      <option value="1.8"></option>      <option value="3.6"></option>      <option value="5.2"></option>    </datalist><label>Dienstbeginn  <input type="time" id="gd_beginn" step="300"></label><label>Dienstende  <input type="time" id="gd_ende" step="300"></label>    <button type="button" onclick="addGottesdienst()">      Gottesdienst hinzufügen    </button>  </div>  <table>    <thead>      <tr>        <th>Kirchort</th>        <th>Datum</th>        <th>Satz</th>        <th>Beginn</th>        <th>Ende</th>        <th>Aktion</th>      </tr>    </thead>    <tbody id="gd_liste"></tbody>  </table>  <input type="hidden" name="Gottesdienste" id="gottesdienste_json">  <div class="actions">    <button type="submit" formnovalidate>PDF erzeugen</button>  </div></form><script>/* ===== Daten für Ort-Vorschläge pro Pfarrei ===== */const ORTE_HKK = [  "St. Georg Dom",  "St. Antonius Eschhofen",  "St. Hildegard Limburg",  "St. Jakobus Lindenholzhausen",  "St. Johannes d.T. Elz",  "St. Josef Staffel",  "St. Lubentius Dietkirchen",  "St. Marien Limburg",  "St. Nikolaus Dehrn",  "St. Servatius Offheim"];function getSelectedPfarrei() {  return (document.getElementById("kirchengemeinde_input").value || "").trim();}function setOrteDatalist(options) {  const dl = document.getElementById("orte_datalist");  dl.innerHTML = "";  (options || []).forEach(o => {    const opt = document.createElement("option");    opt.value = o;    dl.appendChild(opt);  });}function updateOrtSuggestions() {  const pfarrei = getSelectedPfarrei();  if (pfarrei === "Heilige Katharina Kaspar Limburger Land") {    setOrteDatalist(ORTE_HKK);  } else {    setOrteDatalist([]);  }}/* ===== Kirchengemeinde aus Dropdown übernehmen ===== */function setKirchengemeindeFromSelect() {  const select = document.getElementById("kirchengemeinde_select");  const input = document.getElementById("kirchengemeinde_input");  if (select.value) {    input.value = select.value;  }  updateOrtSuggestions();}/* Wenn Nutzer manuell Pfarrei tippt, sollen Vorschläge ebenfalls reagieren */document.getElementById("kirchengemeinde_input")  .addEventListener("input", updateOrtSuggestions);/* Initial einmal setzen (falls Browser cached) */updateOrtSuggestions();/* ===== Gottesdienste ===== */let gottesdienste = [];function addGottesdienst() {  const kirchort = document.getElementById("gd_kirchort").value.trim();  const datum = document.getElementById("gd_datum").value;  const satz = document.getElementById("gd_satz").value;  const beginn = document.getElementById("gd_beginn").value;  const ende = document.getElementById("gd_ende").value;  if (!kirchort || !datum || !satz || !beginn || !ende) {    alert("Bitte alle Felder ausfüllen.");    return;  }  gottesdienste.push({ kirchort, datum, satz, beginn, ende });  document.getElementById("gd_kirchort").value = "";  document.getElementById("gd_datum").value = "";  document.getElementById("gd_satz").value = "";  document.getElementById("gd_beginn").value = "";  document.getElementById("gd_ende").value = "";  updateListe();}function removeGottesdienst(index) {  gottesdienste.splice(index, 1);  updateListe();}function updateListe() {  const tbody = document.getElementById("gd_liste");  tbody.innerHTML = "";  gottesdienste.forEach((gd, index) => {    const row = document.createElement("tr");    row.innerHTML = `      <td>${gd.kirchort}</td>      <td>${gd.datum}</td>      <td>${gd.satz}</td>      <td>${gd.beginn}</td>      <td>${gd.ende}</td>      <td>        <button type="button" onclick="removeGottesdienst(${index})">X</button>      </td>    `;    tbody.appendChild(row);  });  document.getElementById("gottesdienste_json").value =    JSON.stringify(gottesdienste);}/* ===== Submit: JSON immer aktuell ===== */document.querySelector("form").addEventListener("submit", function () {  document.getElementById("gottesdienste_json").value =    JSON.stringify(gottesdienste);});</script></body></html>